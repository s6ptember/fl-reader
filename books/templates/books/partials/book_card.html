<div class="book-card group relative flex flex-col gap-3">
    <div hx-get="{% url 'books:book_detail' book.id %}"
         hx-target="#main-content"
         hx-swap="innerHTML"
         hx-push-url="true"
         class="relative aspect-[2/3] w-full rounded-[24px] overflow-hidden transition-all duration-500 group-hover:scale-[1.05] group-hover:-translate-y-2 group-active:scale-95 shadow-xl group-hover:shadow-2xl cursor-pointer">

        {% if book.cover %}
        <img src="{{ book.cover.url }}"
             alt="{{ book.title }}"
             class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
        {% else %}
        <div class="w-full h-full bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center">
            <svg class="w-16 h-16 text-white/20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
            </svg>
        </div>
        {% endif %}

        {% if book.reading_progress > 0 %}
        <div class="absolute bottom-3 left-3 right-3 glass py-1.5 px-3 rounded-[20px] text-[10px] font-bold tracking-widest uppercase flex items-center justify-between">
            <span>{{ book.reading_progress }}%</span>
            <div class="w-12 h-1 bg-white/20 rounded-full overflow-hidden">
                <div class="h-full bg-blue-400" style="width: {{ book.reading_progress }}%"></div>
            </div>
        </div>
        {% endif %}

        <button class="absolute top-2 right-2 w-8 h-8 rounded-full bg-black/50 backdrop-blur-sm hover:bg-red-500/80 transition-all flex items-center justify-center opacity-0 group-hover:opacity-100 z-10"
                hx-delete="{% url 'books:delete_book' book.id %}"
                hx-confirm="Удалить книгу '{{ book.title }}'?"
                hx-target="closest .book-card"
                hx-swap="outerHTML swap:300ms"
                onclick="event.stopPropagation();">
            <svg class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>
    </div>

    <div class="px-1">
        <h3 class="text-sm font-semibold truncate group-hover:text-blue-400 transition-colors">{{ book.title }}</h3>
        <p class="text-xs text-white/40 truncate">{{ book.author }}</p>
    </div>
</div>

{% if show_message %}
    {% include "books/partials/messages.html" %}
{% endif %}
